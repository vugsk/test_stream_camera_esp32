# –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### –ê–ø–ø–∞—Ä–∞—Ç–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞

#### ESP32-CAM (AI-Thinker)
- **–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä**: Dual-core Tensilica Xtensa LX6 @ 240MHz
- **RAM**: 520KB SRAM + 4MB PSRAM
- **Flash**: 4MB
- **WiFi**: 802.11 b/g/n (2.4GHz)
- **Bluetooth**: BT 4.2 BR/EDR –∏ BLE
- **–ö–∞–º–µ—Ä–∞**: OV2640 (2MP, –¥–æ 1600x1200)
- **–ü–∏—Ç–∞–Ω–∏–µ**: 5V —á–µ—Ä–µ–∑ USB –∏–ª–∏ –ø–∏–Ω—ã

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –º–æ–¥—É–ª—è**:
- –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∫–∞–º–µ—Ä–∞ —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º –¥–æ UXGA (1600x1200)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ JPEG –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏ –Ω–∞ –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–º —É—Ä–æ–≤–Ω–µ
- PSRAM –¥–ª—è –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏ –±–æ–ª—å—à–∏—Ö –∫–∞–¥—Ä–æ–≤
- MicroSD —Å–ª–æ—Ç (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –¥–∞–Ω–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ)

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞

#### PlatformIO
**–í–µ—Ä—Å–∏—è**: Latest  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–º

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å VS Code
- –£–¥–æ–±–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—à–∏–≤–æ–∫

**platformio.ini –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**:
```ini
[env:esp32cam]
platform = espressif32
board = esp32cam
framework = arduino
monitor_speed = 115200
board_build.partitions = huge_app.csv
build_flags = 
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue
lib_deps = 
    ArduinoJson@^7.0.0
```

#### Arduino Framework
**–í–µ—Ä—Å–∏—è**: ESP32 Arduino Core  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
- `Arduino.h` ‚Äî –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (pinMode, digitalWrite, etc.)
- `WiFi.h` ‚Äî WiFi —Å—Ç–µ–∫ ESP32
- `esp_camera.h` ‚Äî –¥—Ä–∞–π–≤–µ—Ä –∫–∞–º–µ—Ä—ã
- `esp_wifi.h` ‚Äî –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ WiFi –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- `Preferences.h` ‚Äî NVS (Non-Volatile Storage)
- `BluetoothSerial.h` ‚Äî Bluetooth Serial Port Profile (SPP)

### –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏

#### 1. ArduinoJson (v7.0.0)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–∞—Ä—Å–∏–Ω–≥ –∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è JSON

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ**:
- –ü—Ä–∏–µ–º –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- Bluetooth –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–ü—Ä–∏–º–µ—Ä**:
```cpp
JsonDocument doc;
doc["ssid"] = "WiFi";
doc["password"] = "pass";
String json;
serializeJson(doc, json);
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- Zero-copy –ø–∞—Ä—Å–∏–Ω–≥
- –ú–∞–ª–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
- Header-only –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤

#### 2. WiFiClient (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: TCP/IP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
- Persistent HTTP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —Å–µ—Ä–≤–µ—Ä–æ–º
- –û—Ç–ø—Ä–∞–≤–∫–∞ JPEG –∫–∞–¥—Ä–æ–≤
- –ü—Ä–∏–µ–º –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**:
```cpp
client.setNoDelay(true);      // TCP_NODELAY
client.setTimeout(500);       // –ë—ã—Å—Ç—Ä—ã–µ —Ç–∞–π–º–∞—É—Ç—ã
WiFi.setSleep(false);         // –û—Ç–∫–ª—é—á–µ–Ω–∏–µ sleep
```

#### 3. HTTPClient (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: HTTP –∑–∞–ø—Ä–æ—Å—ã

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
- GET –∑–∞–ø—Ä–æ—Å—ã –∫ /api/camera (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
- POST –∑–∞–ø—Ä–æ—Å—ã –∫ /api/status (—Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è)

**–ü—Ä–∏–º–µ—Ä**:
```cpp
HTTPClient http;
http.begin("http://192.168.1.100:8081/api/camera");
int httpCode = http.GET();
String payload = http.getString();
```

#### 4. ESP Camera Driver (esp_camera.h)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–µ—Ä–æ–π OV2640

**–§—É–Ω–∫—Ü–∏–∏**:
- –ó–∞—Ö–≤–∞—Ç –∫–∞–¥—Ä–æ–≤ –≤ JPEG —Ñ–æ—Ä–º–∞—Ç–µ
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Å–µ–Ω—Å–æ—Ä–∞
- –î–≤–æ–π–Ω–∞—è –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**:
```cpp
camera_config_t config;
config.pixel_format = PIXFORMAT_JPEG;
config.frame_size = FRAMESIZE_HD;
config.jpeg_quality = 15;
config.fb_count = 2;  // Double buffering
config.fb_location = CAMERA_FB_IN_PSRAM;
config.grab_mode = CAMERA_GRAB_LATEST;
```

#### 5. Preferences (NVS)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –≠–Ω–µ—Ä–≥–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

**–†–∞–∑–¥–µ–ª—ã (namespaces)**:
- `wifi` ‚Äî WiFi credentials –∏ server_host
- `camera` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–º–µ—Ä—ã
- `bluetooth` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Bluetooth

**–ü—Ä–∏–º–µ—Ä**:
```cpp
Preferences prefs;
prefs.begin("wifi", false);  // false = read-write
prefs.putString("ssid", "MyWiFi");
String ssid = prefs.getString("ssid", "default");
prefs.end();
```

#### 6. BluetoothSerial
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: Serial Port Profile (SPP) –¥–ª—è Bluetooth

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
- –ü—Ä–∏–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –æ—Ç –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –î–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Å–≤—è–∑—å

**–ü—Ä–∏–º–µ—Ä**:
```cpp
BluetoothSerial SerialBT;
SerialBT.begin("ESP32-CAM-Config");
if (SerialBT.available()) {
    String data = SerialBT.readStringUntil('\n');
}
```

## üîß –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### Visual Studio Code
- **–†–∞—Å—à–∏—Ä–µ–Ω–∏—è**:
  - PlatformIO IDE
  - C/C++ IntelliSense
  - Serial Monitor

### PlatformIO CLI
**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã**:
```bash
pio run                 # –°–±–æ—Ä–∫–∞
pio run -t upload       # –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
pio device monitor      # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Serial –ø–æ—Ä—Ç–∞
pio run -t clean        # –û—á–∏—Å—Ç–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
```

### Serial Monitor
**–ù–∞—Å—Ç—Ä–æ–π–∫–∏**:
- Baud Rate: 115200
- Line Ending: LF –∏–ª–∏ CRLF

## üì° –ü—Ä–æ—Ç–æ–∫–æ–ª—ã –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã

### 1. HTTP/1.1
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –ü–µ—Ä–µ–¥–∞—á–∞ –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–∞ –∏ API

**–ú–µ—Ç–æ–¥—ã**:
- `POST /stream` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ JPEG –∫–∞–¥—Ä–æ–≤
- `GET /api/camera` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- `POST /api/status` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏

**Headers**:
```http
Connection: keep-alive
Content-Type: image/jpeg
X-Frame: <frame_number>
```

### 2. TCP/IP
**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**:
- TCP_NODELAY (–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ Nagle)
- Keep-Alive —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- Chunk size: 16KB

### 3. WiFi 802.11 b/g/n
**–ù–∞—Å—Ç—Ä–æ–π–∫–∏**:
- –ß–∞—Å—Ç–æ—Ç–∞: 2.4 GHz
- Power: 19.5 dBm (–º–∞–∫—Å–∏–º—É–º)
- Power Save: –û—Ç–∫–ª—é—á–µ–Ω

### 4. Bluetooth 4.2 Classic
**–ü—Ä–æ—Ñ–∏–ª—å**: SPP (Serial Port Profile)

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏**:
- –î–∞–ª—å–Ω–æ—Å—Ç—å: –¥–æ 10–º
- –°–∫–æ—Ä–æ—Å—Ç—å: –¥–æ 3 Mbps
- Latency: ~100ms

### 5. JSON
**–°—Ç–∞–Ω–¥–∞—Ä—Ç**: RFC 8259

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Bluetooth
- API —Å —Å–µ—Ä–≤–µ—Ä–æ–º
- –¢–µ–ª–µ–º–µ—Ç—Ä–∏—è

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

### State Machine (–ö–æ–Ω–µ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç)
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —á–µ—Ä–µ–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### Modular Architecture
–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –ø–æ –º–æ–¥—É–ª—è–º

### Event-Driven
–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ü–∏–∫–ª–µ

### Keep-Alive Pattern
Persistent HTTP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –¥–ª—è —Å—Ç—Ä–∏–º–∏–Ω–≥–∞

### Factory Settings Pattern
Fallback –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ config.h –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –≤ NVS

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ**: –î–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –±–µ–∑ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

- HTTP (–Ω–µ HTTPS)
- –û—Ç–∫—Ä—ã—Ç—ã–π Bluetooth
- –ü–∞—Ä–æ–ª–∏ –≤ plain text

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTTPS (TLS/SSL)
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ Bluetooth –ø–∞—Ä–æ–ª–µ–º
- –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞
```ini
build_flags = 
    -O2                              # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
    -DBOARD_HAS_PSRAM               # PSRAM –ø–æ–¥–¥–µ—Ä–∂–∫–∞
    -mfix-esp32-psram-cache-issue   # –§–∏–∫—Å –∫—ç—à–∞ PSRAM
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
```
Flash:  ~1.2 MB (–ø—Ä–æ–≥—Ä–∞–º–º–∞ + –±–∏–±–ª–∏–æ—Ç–µ–∫–∏)
SRAM:   ~200 KB (—Å—Ç–µ–∫ + –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)
PSRAM:  ~150 KB –Ω–∞ HD –∫–∞–¥—Ä (x2 –¥–ª—è double buffering)
```

### –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
- **VGA (640x480) @ 60fps**: ~15 Mbps
- **HD (1280x720) @ 30fps**: ~12 Mbps
- **HD (1280x720) @ 60fps**: ~24 Mbps

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—à–∏–≤–∫–∏

### OTA (Over-The-Air)
‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –±—É–¥—É—â–µ–º)

### –ß–µ—Ä–µ–∑ USB
‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–µ—Ç–æ–¥ —á–µ—Ä–µ–∑ PlatformIO:
```bash
pio run -t upload
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [ESP32 Arduino Core](https://github.com/espressif/arduino-esp32)
- [ESP32-CAM Datasheet](https://github.com/SeeedDocument/forum_doc/raw/master/reg/ESP32_CAM_V1.6.pdf)
- [OV2640 Sensor](https://www.ovt.com/sensors/OV2640)
- [ArduinoJson Documentation](https://arduinojson.org/)
- [PlatformIO Documentation](https://docs.platformio.org/)
